// <auto-generated/>
#nullable restore

using System.Text.Json.Nodes;
using NATS.Client.JetStream;
using NATS.Net;
using Service.Api.Common;
using TestProject.Application.Handlers;

namespace TestProject;

public class RequestDispatcher(IGetUsersHandler getUsersHandler, IPostUsersHandler postUsersHandler) : IRequestDispatcher
{
    public async Task DispatchRequest(NatsClient client, (string httpMethod, string pathPart) splitSubject, INatsJSMsg<Request<JsonNode>> message, IRestHandler restHandler, CancellationToken cancellationToken)
    {
        switch (splitSubject)
        {
            case ("get", "users"):
                await restHandler.HandleGet(client, message, getUsersHandler, cancellationToken);
                break;
            case ("post", "users"):
                await restHandler.HandlePost(client, message, postUsersHandler, cancellationToken);
                break;
        }
    }
}
